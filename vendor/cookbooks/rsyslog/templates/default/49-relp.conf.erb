# Generated by Chef
$ModLoad omrelp
$ActionQueueType LinkedList # use asynchronous processing
$ActionQueueFileName srvrfwd # set file name, also enables disk mode
$ActionResumeRetryCount -1 # infinite retries on insert failure
$ActionQueueSaveOnShutdown on # save in-memory data if rsyslog shuts down

<% @servers.each do |server| -%>
<%= node['rsyslog']['logs_to_forward'] %> :omrelp:<%= "#{server['server']}:#{node['rsyslog']['relp_port']}" %><% if server['remote_template'] -%>;<%= server['remote_template'] %> <% elsif node['rsyslog']['default_remote_template'] -%>;<%= node['rsyslog']['default_remote_template'] %><% end -%>
<% end -%>
