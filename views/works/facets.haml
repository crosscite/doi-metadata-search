.panel.facets
  - if @works[:meta]["registered"].present?
    .panel-body
      %h4
        Registration Year
      %ul
        - @works[:meta]["registered"].each do |f|
          - if params['registered'] == f.fetch("id", nil)
            %li.active
              %a{:href => works_query(params.except('registered'))}
                %i.far.fa-check-square
              .facet-title
                = f.fetch("title", nil)
              %span.number.pull-right= "#{number_with_delimiter(f.fetch("count", 0))}"
              .clearfix
          - else
            %li
              %a{:href => works_query(params.merge('registered' => f.fetch("id", nil)))}
                %i.far.fa-square
              .facet-title
                = f.fetch("title", nil)
              %span.number.pull-right= "#{number_with_delimiter(f.fetch("count", 0))}"
              .clearfix
              
  - if @works[:meta]["resourceTypes"].present?
    .panel-body
      %h4
        Resource Types
      %ul
        - @works[:meta]["resourceTypes"].each do |f|
          - if params['resource-type-id'] == f.fetch("id", nil)
            %li.active
              %a{:href => works_query(params.except('resource-type-id'))}
                %i.far.fa-check-square
              .facet-title
                = f.fetch("title", nil)
              %span.number.pull-right= "#{number_with_delimiter(f.fetch("count", 0))}"
              .clearfix
          - else
            %li
              %a{:href => works_query(params.merge('resource-type-id' => f.fetch("id", nil)))}
                %i.far.fa-square
              .facet-title
                = f.fetch("title", nil)
              %span.number.pull-right= "#{number_with_delimiter(f.fetch("count", 0))}"
              .clearfix

  - if @datacenter.blank? && @works[:meta]["repositories"].present?
    .panel-body
      %h4
        Repositories
      %ul
        - @works[:meta]["repositories"].each do |f|
          - if params['data-center-id'] == f.fetch("id", nil)
            %li.active
              %a{:href => works_query(params.except('data-center-id'))}
                %i.far.fa-check-square
              .facet-title
                = f.fetch("title", nil)
              %span.number.pull-right= "#{number_with_delimiter(f.fetch("count", 0))}"
              .clearfix
          - else
            %li
              %a{:href => works_query(params.merge('data-center-id' => f.fetch("id", nil)))}
                %i.far.fa-square
              .facet-title
                = f.fetch("title", nil)
              %span.number.pull-right= "#{number_with_delimiter(f.fetch("count", 0))}"
              .clearfix
  - if @works[:meta]["affiliations"].present?
    .panel-body
      %h4
        Affiliations
      %ul
        - @works[:meta]["affiliations"].each do |f|
          - if f.fetch("title", nil) != f.fetch("id", nil)
            - if params['affiliation-id'] == f.fetch("id", nil)
              %li.active
                %a{:href => works_query(params.except('affiliation-id'))}
                  %i.far.fa-check-square
                .facet-title
                  = f.fetch("title", nil)
                %span.number.pull-right= "#{number_with_delimiter(f.fetch("count", 0))}"
                .clearfix
            - else
              %li
                %a{:href => works_query(params.merge('affiliation-id' => f.fetch("id", nil)))}
                  %i.far.fa-square
                .facet-title
                  = f.fetch("title", nil)
                %span.number.pull-right= "#{number_with_delimiter(f.fetch("count", 0))}"
                .clearfix
