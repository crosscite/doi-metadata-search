= haml :"#{ENV['RA']}/header", locals: { page: {} }

.container-fluid
  .row
    .col-md-9
      = haml :'works/search'

  .row
    .col-md-9#content
      - if flash[:error].present?
        %div.alert.alert-warning
          = flash[:error]

      - if @works.length > 0
        - if @works.length > 1
          %h4.results
            = "#{number_with_delimiter(@meta['total'])} Works"

        - @works.each do |item|
          = haml :'works/item', locals: { item: item }

        .text-center
          = will_paginate @works, renderer: BootstrapPagination::Sinatra

      - else
        %div.alert.alert-info
          Nothing found.

    .col-md-3
      = haml :'works/facets'

= haml :cite_box

%script{:type => 'text/javascript', :src => '/javascripts/itemlist.js'}

= haml :"#{ENV['RA']}/footer"
