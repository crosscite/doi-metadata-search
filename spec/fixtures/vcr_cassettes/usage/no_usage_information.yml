---
http_interactions:
- request:
    method: get
    uri: https://api.test.datacite.org/works/10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff?include=data-center,resource-type,member
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Mozilla/5.0 (compatible; Maremma/4.4; +https://github.com/datacite/maremma)
      Accept:
      - text/html,application/json,application/xml;q=0.9, text/plain;q=0.8,image/png,*/*;q=0.5
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 18 Nov 2019 10:17:25 GMT
      Content-Type:
      - application/json; charset=utf-8
      Connection:
      - keep-alive
      Status:
      - 200 OK
      X-Anonymous-Consumer:
      - 'true'
      Cache-Control:
      - max-age=0, private, must-revalidate
      Vary:
      - Accept-Encoding, Origin
      X-Request-Id:
      - 5c6b8b2f-cd94-41c8-8f51-ec4369e8fb33
      Etag:
      - W/"07d5ce2e4174c1068aca7e15b087e2a2"
      X-Runtime:
      - '0.061039'
      X-Powered-By:
      - Phusion Passenger 6.0.4
      Server:
      - nginx/1.17.3 + Phusion Passenger 6.0.4
    body:
      encoding: ASCII-8BIT
      string: '{"data":{"id":"https://handle.test.datacite.org/10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff","type":"works","attributes":{"doi":"10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff","identifier":"https://handle.test.datacite.org/10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff","url":"https://portal-s.lternet.edu/nis/mapbrowse?packageid=knb-lter-jrn.100.4","author":[{"given":"Wenjie","family":"Ji"},{"given":"Niall
        P.","family":"Hanan"}],"title":"High resolution shrub cover raster maps of
        the Jornada Basin LTER, including JER and CDRRC (2011)","container-title":"Environmental
        Data Initiative","description":"This data package contains two raster shrub
        cover maps of the Jornada Experimental Range and Chihuahuan Desert Rangeland
        Research Center (CDRRC) created using 1m resolution National Agriculture Imagery
        Program (NAIP) aerial photo acquired in 2011. A one-meter resolution raster
        file lists cover as non-shrub, shrub, or no data available. A hectare resolution
        raster file contains fractional shrub cover values (0-1) calculed from the
        1 meter raster. NOTE: There is currently a hole in the coverage of the hectare
        raster (no-data values) in the \"scarplet\" region in the southeastern portion
        of the Jornada Basin. The creators of the dataset plan to fill this missing
        area of coverage in a future update to the data package once suitable imagery
        of the area is acquired.","resource-type-subtype":"dataPackage","data-center-id":"datacite.edi","member-id":"datacite","resource-type-id":"dataset","version":null,"license":null,"schema-version":null,"results":[],"related-identifiers":[],"published":"2019","registered":"2019-11-18T06:10:00.000Z","checked":null,"updated":"2019-11-18T06:10:00.000Z","media":[],"xml":"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHJlc291cmNlIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhtbG5zPSJodHRwOi8vZGF0YWNpdGUub3JnL3NjaGVtYS9rZXJuZWwtNCIgeHNpOnNjaGVtYUxvY2F0aW9uPSJodHRwOi8vZGF0YWNpdGUub3JnL3NjaGVtYS9rZXJuZWwtNCBodHRwOi8vc2NoZW1hLmRhdGFjaXRlLm9yZy9tZXRhL2tlcm5lbC00LjEvbWV0YWRhdGEueHNkIj4KICA8aWRlbnRpZmllciBpZGVudGlmaWVyVHlwZT0iRE9JIj4xMC4wMzExL0ZLMi9FMTE2NDNBOTlEOTAzRDBDQ0ZDMkQ1MjNCMzQ0RDlGRjwvaWRlbnRpZmllcj4KICA8Y3JlYXRvcnM+CiAgICA8Y3JlYXRvcj4KICAgICAgPGNyZWF0b3JOYW1lPkppLCBXZW5qaWU8L2NyZWF0b3JOYW1lPgogICAgPC9jcmVhdG9yPgogICAgPGNyZWF0b3I+CiAgICAgIDxjcmVhdG9yTmFtZT5IYW5hbiwgTmlhbGwgUC48L2NyZWF0b3JOYW1lPgogICAgPC9jcmVhdG9yPgogIDwvY3JlYXRvcnM+CiAgPHRpdGxlcz4KICAgIDx0aXRsZT5IaWdoIHJlc29sdXRpb24gc2hydWIgY292ZXIgcmFzdGVyIG1hcHMgb2YgdGhlIEpvcm5hZGEgQmFzaW4gTFRFUiwgaW5jbHVkaW5nIEpFUiBhbmQgQ0RSUkMgKDIwMTEpPC90aXRsZT4KICA8L3RpdGxlcz4KICA8cHVibGlzaGVyPkVudmlyb25tZW50YWwgRGF0YSBJbml0aWF0aXZlPC9wdWJsaXNoZXI+CiAgPHB1YmxpY2F0aW9uWWVhcj4yMDE5PC9wdWJsaWNhdGlvblllYXI+CiAgPHJlc291cmNlVHlwZSByZXNvdXJjZVR5cGVHZW5lcmFsPSJEYXRhc2V0Ij5kYXRhUGFja2FnZTwvcmVzb3VyY2VUeXBlPgogIDxsYW5ndWFnZT5lbmc8L2xhbmd1YWdlPgogIDxhbHRlcm5hdGVJZGVudGlmaWVycz4KICAgIDxhbHRlcm5hdGVJZGVudGlmaWVyIGFsdGVybmF0ZUlkZW50aWZpZXJUeXBlPSJVUkwiPmh0dHBzOi8vcGFzdGEtcy5sdGVybmV0LmVkdS9wYWNrYWdlL2VtbC9rbmItbHRlci1qcm4vMTAwLzQ8L2FsdGVybmF0ZUlkZW50aWZpZXI+CiAgPC9hbHRlcm5hdGVJZGVudGlmaWVycz4KICA8ZGVzY3JpcHRpb25zPgogICAgPGRlc2NyaXB0aW9uIHhtbDpsYW5nPSJlbi1VUyIgZGVzY3JpcHRpb25UeXBlPSJBYnN0cmFjdCI+VGhpcyBkYXRhIHBhY2thZ2UgY29udGFpbnMgdHdvIHJhc3RlciBzaHJ1YiBjb3ZlciBtYXBzIG9mIHRoZSBKb3JuYWRhCiAgRXhwZXJpbWVudGFsIFJhbmdlIGFuZCBDaGlodWFodWFuIERlc2VydCBSYW5nZWxhbmQgUmVzZWFyY2ggQ2VudGVyCiAgKENEUlJDKSBjcmVhdGVkIHVzaW5nIDFtIHJlc29sdXRpb24gTmF0aW9uYWwgQWdyaWN1bHR1cmUgSW1hZ2VyeQogIFByb2dyYW0gKE5BSVApIGFlcmlhbCBwaG90byBhY3F1aXJlZCBpbiAyMDExLiBBIG9uZS1tZXRlciByZXNvbHV0aW9uCiAgcmFzdGVyIGZpbGUgbGlzdHMgY292ZXIgYXMgbm9uLXNocnViLCBzaHJ1Yiwgb3Igbm8gZGF0YSBhdmFpbGFibGUuIEEKICBoZWN0YXJlIHJlc29sdXRpb24gcmFzdGVyIGZpbGUgY29udGFpbnMgZnJhY3Rpb25hbCBzaHJ1YiBjb3ZlciB2YWx1ZXMKICAoMC0xKSBjYWxjdWxlZCBmcm9tIHRoZSAxIG1ldGVyIHJhc3Rlci4KCiAgICAgIAogICAgICAgIE5PVEU6IFRoZXJlIGlzIGN1cnJlbnRseSBhIGhvbGUgaW4gdGhlIGNvdmVyYWdlIG9mIHRoZQogIGhlY3RhcmUgcmFzdGVyIChuby1kYXRhIHZhbHVlcykgaW4gdGhlICJzY2FycGxldCIgcmVnaW9uIGluCiAgdGhlIHNvdXRoZWFzdGVybiBwb3J0aW9uIG9mIHRoZSBKb3JuYWRhIEJhc2luLiBUaGUgY3JlYXRvcnMgb2YgdGhlCiAgZGF0YXNldCBwbGFuIHRvIGZpbGwgdGhpcyBtaXNzaW5nIGFyZWEgb2YgY292ZXJhZ2UgaW4gYSBmdXR1cmUgdXBkYXRlCiAgdG8gdGhlIGRhdGEgcGFja2FnZSBvbmNlIHN1aXRhYmxlIGltYWdlcnkgb2YgdGhlIGFyZWEgaXMKICBhY3F1aXJlZC48L2Rlc2NyaXB0aW9uPgogIDwvZGVzY3JpcHRpb25zPgo8L3Jlc291cmNlPg=="},"relationships":{"data-center":{"data":{"id":"datacite.edi","type":"data-centers"}},"member":{"data":{"id":"datacite","type":"members"}},"resource-type":{"data":{"id":"dataset","type":"resource-types"}}}},"included":[{"id":"datacite.edi","type":"data-centers","attributes":{"title":"Environmental
        Data Initiative","other-names":[],"prefixes":[],"member-id":"datacite","year":2017,"created":"2017-05-10T10:07:37.000Z","updated":"2018-08-26T01:31:05.000Z"},"relationships":{"member":{"data":{"id":"datacite","type":"members"}}}},{"id":"datacite","type":"members","attributes":{"title":"DataCite","display-title":"DataCite","description":null,"member-type":"consortium_organization","organization-type":null,"focus-area":null,"region":"EMEA","country":"DE","year":null,"logo-url":null,"email":null,"website":"https://datacite.org","joined":null,"created":"2011-12-07T13:41:07.000Z","updated":"2019-10-31T16:58:09.000Z"}},{"id":"dataset","type":"resource-types","attributes":{"title":"Dataset","updated":"2016-09-21T00:00:00Z"},"relationships":{}}]}'
    http_version: 
  recorded_at: Mon, 18 Nov 2019 10:17:25 GMT
- request:
    method: get
    uri: https://api.test.datacite.org/events?aggregations=query_aggregations,metrics_aggregations,citations_aggregations&doi=10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff&extra=true&include=dois&page%5Bnumber%5D=1&page%5Bsize%5D=25&sort=relation_type_id&source-id=datacite-related,datacite-crossref,crossref,datacite-usage,datacite-funder
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Mozilla/5.0 (compatible; Maremma/4.4; +https://github.com/datacite/maremma)
      Accept:
      - application/vnd.api+json; version=2
  response:
    status:
      code: 500
      message: Internal Server Error
    headers:
      Date:
      - Mon, 18 Nov 2019 10:17:26 GMT
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '21860'
      Connection:
      - keep-alive
      Status:
      - 500 Internal Server Error
      Vary:
      - Origin
      X-Request-Id:
      - 5e9441b6-55fe-49d9-8ded-f2b69ac619a0
      X-Runtime:
      - '0.059758'
      X-Powered-By:
      - Phusion Passenger 6.0.4
      Server:
      - nginx/1.17.3 + Phusion Passenger 6.0.4
    body:
      encoding: ASCII-8BIT
      string: '{"status":500,"error":"Internal Server Error","exception":"#<Elasticsearch::Transport::Transport::Errors::InternalServerError:
        [500] {\"error\":{\"root_cause\":[{\"type\":\"circuit_breaking_exception\",\"reason\":\"[script]
        Too many dynamic script compilations within, max: [75/5m]; please use indexed,
        or scripts with parameters instead; this limit can be changed by the [script.max_compilations_rate]
        setting\",\"bytes_wanted\":0,\"bytes_limit\":0,\"durability\":\"TRANSIENT\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all
        shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\"events_v2\",\"node\":\"pKbNDYClRwScKwbg6YVluQ\",\"reason\":{\"type\":\"general_script_exception\",\"reason\":\"Failed
        to compile inline script [([\\\"is-cited-by\\\", \\\"is-supplemented-by\\\",
        \\\"is-referenced-by\\\"].contains(doc[''relation_type_id''].value) && ''https://doi.org/10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff''
        == doc[''obj_id''].value) || ([\\\"cites\\\", \\\"is-supplement-to\\\", \\\"references\\\"].contains(doc[''relation_type_id''].value)
        && ''https://doi.org/10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff'' == doc[''subj_id''].value)]
        using lang [painless]\",\"caused_by\":{\"type\":\"circuit_breaking_exception\",\"reason\":\"[script]
        Too many dynamic script compilations within, max: [75/5m]; please use indexed,
        or scripts with parameters instead; this limit can be changed by the [script.max_compilations_rate]
        setting\",\"bytes_wanted\":0,\"bytes_limit\":0,\"durability\":\"TRANSIENT\"}}}],\"caused_by\":{\"type\":\"circuit_breaking_exception\",\"reason\":\"[script]
        Too many dynamic script compilations within, max: [75/5m]; please use indexed,
        or scripts with parameters instead; this limit can be changed by the [script.max_compilations_rate]
        setting\",\"bytes_wanted\":0,\"bytes_limit\":0,\"durability\":\"TRANSIENT\"}},\"status\":500}>","traces":{"Application
        Trace":[{"id":8,"trace":"app/controllers/events_controller.rb:113:in `index''"}],"Framework
        Trace":[{"id":0,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-transport-7.1.0/lib/elasticsearch/transport/transport/base.rb:218:in
        `__raise_transport_error''"},{"id":1,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-transport-7.1.0/lib/elasticsearch/transport/transport/base.rb:338:in
        `perform_request''"},{"id":2,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-transport-7.1.0/lib/elasticsearch/transport/transport/http/faraday.rb:37:in
        `perform_request''"},{"id":3,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-transport-7.1.0/lib/elasticsearch/transport/client.rb:160:in
        `perform_request''"},{"id":4,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-api-7.1.0/lib/elasticsearch/api/actions/search.rb:160:in
        `search''"},{"id":5,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-model-7.0.0/lib/elasticsearch/model/searching.rb:68:in
        `execute!''"},{"id":6,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-model-7.0.0/lib/elasticsearch/model/response.rb:46:in
        `response''"},{"id":7,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-model-7.0.0/lib/elasticsearch/model/response/base.rb:51:in
        `total''"},{"id":9,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/basic_implicit_render.rb:6:in
        `send_action''"},{"id":10,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/abstract_controller/base.rb:194:in
        `process_action''"},{"id":11,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/rendering.rb:30:in
        `process_action''"},{"id":12,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/abstract_controller/callbacks.rb:42:in
        `block in process_action''"},{"id":13,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:109:in
        `block in run_callbacks''"},{"id":14,"trace":"vendor/bundle/ruby/2.4.0/gems/audited-4.9.0/lib/audited/sweeper.rb:14:in
        `around''"},{"id":15,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:118:in
        `block in run_callbacks''"},{"id":16,"trace":"vendor/bundle/ruby/2.4.0/gems/audited-4.9.0/lib/audited/sweeper.rb:14:in
        `around''"},{"id":17,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:118:in
        `block in run_callbacks''"},{"id":18,"trace":"vendor/bundle/ruby/2.4.0/gems/sentry-raven-2.12.2/lib/raven/integrations/rails/controller_transaction.rb:7:in
        `block in included''"},{"id":19,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:118:in
        `instance_exec''"},{"id":20,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:118:in
        `block in run_callbacks''"},{"id":21,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:136:in
        `run_callbacks''"},{"id":22,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/abstract_controller/callbacks.rb:41:in
        `process_action''"},{"id":23,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/rescue.rb:22:in
        `process_action''"},{"id":24,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/instrumentation.rb:34:in
        `block in process_action''"},{"id":25,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/notifications.rb:168:in
        `block in instrument''"},{"id":26,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/notifications/instrumenter.rb:23:in
        `instrument''"},{"id":27,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/notifications.rb:168:in
        `instrument''"},{"id":28,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/instrumentation.rb:32:in
        `process_action''"},{"id":29,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/params_wrapper.rb:256:in
        `process_action''"},{"id":30,"trace":"vendor/bundle/ruby/2.4.0/gems/activerecord-5.2.3/lib/active_record/railties/controller_runtime.rb:24:in
        `process_action''"},{"id":31,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/abstract_controller/base.rb:134:in
        `process''"},{"id":32,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal.rb:191:in
        `dispatch''"},{"id":33,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal.rb:252:in
        `dispatch''"},{"id":34,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/route_set.rb:52:in
        `dispatch''"},{"id":35,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/route_set.rb:34:in
        `serve''"},{"id":36,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/mapper.rb:18:in
        `block in <class:Constraints>''"},{"id":37,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/mapper.rb:48:in
        `serve''"},{"id":38,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/journey/router.rb:52:in
        `block in serve''"},{"id":39,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/journey/router.rb:35:in
        `each''"},{"id":40,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/journey/router.rb:35:in
        `serve''"},{"id":41,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/route_set.rb:840:in
        `call''"},{"id":42,"trace":"vendor/bundle/ruby/2.4.0/gems/turnout-2.5.0/lib/rack/turnout.rb:25:in
        `call''"},{"id":43,"trace":"vendor/bundle/ruby/2.4.0/gems/flipper-0.16.2/lib/flipper/middleware/memoizer.rb:62:in
        `memoized_call''"},{"id":44,"trace":"vendor/bundle/ruby/2.4.0/gems/flipper-0.16.2/lib/flipper/middleware/memoizer.rb:40:in
        `call''"},{"id":45,"trace":"vendor/bundle/ruby/2.4.0/gems/batch-loader-1.4.1/lib/batch_loader/middleware.rb:11:in
        `call''"},{"id":46,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/deflater.rb:34:in
        `call''"},{"id":47,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/etag.rb:25:in
        `call''"},{"id":48,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in
        `call''"},{"id":49,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/head.rb:12:in
        `call''"},{"id":50,"trace":"vendor/bundle/ruby/2.4.0/gems/activerecord-5.2.3/lib/active_record/migration.rb:559:in
        `call''"},{"id":51,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in
        `block in call''"},{"id":52,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:98:in
        `run_callbacks''"},{"id":53,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/callbacks.rb:26:in
        `call''"},{"id":54,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/executor.rb:14:in
        `call''"},{"id":55,"trace":"vendor/bundle/ruby/2.4.0/gems/better_errors-2.5.1/lib/better_errors/middleware.rb:59:in
        `call''"},{"id":56,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/debug_exceptions.rb:61:in
        `call''"},{"id":57,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/show_exceptions.rb:33:in
        `call''"},{"id":58,"trace":"vendor/bundle/ruby/2.4.0/gems/lograge-0.10.0/lib/lograge/rails_ext/rack/logger.rb:15:in
        `call_app''"},{"id":59,"trace":"vendor/bundle/ruby/2.4.0/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in
        `block in call''"},{"id":60,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/tagged_logging.rb:71:in
        `block in tagged''"},{"id":61,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/tagged_logging.rb:28:in
        `tagged''"},{"id":62,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/tagged_logging.rb:71:in
        `tagged''"},{"id":63,"trace":"vendor/bundle/ruby/2.4.0/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in
        `call''"},{"id":64,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/remote_ip.rb:81:in
        `call''"},{"id":65,"trace":"vendor/bundle/ruby/2.4.0/gems/request_store-1.4.1/lib/request_store/middleware.rb:19:in
        `call''"},{"id":66,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/request_id.rb:27:in
        `call''"},{"id":67,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/runtime.rb:22:in
        `call''"},{"id":68,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in
        `call''"},{"id":69,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/executor.rb:14:in
        `call''"},{"id":70,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/static.rb:127:in
        `call''"},{"id":71,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in
        `call''"},{"id":72,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-utf8_sanitizer-1.6.0/lib/rack/utf8_sanitizer.rb:22:in
        `call''"},{"id":73,"trace":"vendor/bundle/ruby/2.4.0/gems/sentry-raven-2.12.2/lib/raven/integrations/rack.rb:51:in
        `call''"},{"id":74,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-cors-1.0.3/lib/rack/cors.rb:95:in
        `call''"},{"id":75,"trace":"vendor/bundle/ruby/2.4.0/gems/railties-5.2.3/lib/rails/engine.rb:524:in
        `call''"},{"id":76,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/rack/thread_handler_extension.rb:97:in
        `process_request''"},{"id":77,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler/thread_handler.rb:149:in
        `accept_and_process_next_request''"},{"id":78,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler/thread_handler.rb:110:in
        `main_loop''"},{"id":79,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler.rb:415:in
        `block (3 levels) in start_threads''"},{"id":80,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/utils.rb:113:in
        `block in create_thread_and_abort_on_exception''"}],"Full Trace":[{"id":0,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-transport-7.1.0/lib/elasticsearch/transport/transport/base.rb:218:in
        `__raise_transport_error''"},{"id":1,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-transport-7.1.0/lib/elasticsearch/transport/transport/base.rb:338:in
        `perform_request''"},{"id":2,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-transport-7.1.0/lib/elasticsearch/transport/transport/http/faraday.rb:37:in
        `perform_request''"},{"id":3,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-transport-7.1.0/lib/elasticsearch/transport/client.rb:160:in
        `perform_request''"},{"id":4,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-api-7.1.0/lib/elasticsearch/api/actions/search.rb:160:in
        `search''"},{"id":5,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-model-7.0.0/lib/elasticsearch/model/searching.rb:68:in
        `execute!''"},{"id":6,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-model-7.0.0/lib/elasticsearch/model/response.rb:46:in
        `response''"},{"id":7,"trace":"vendor/bundle/ruby/2.4.0/gems/elasticsearch-model-7.0.0/lib/elasticsearch/model/response/base.rb:51:in
        `total''"},{"id":8,"trace":"app/controllers/events_controller.rb:113:in `index''"},{"id":9,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/basic_implicit_render.rb:6:in
        `send_action''"},{"id":10,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/abstract_controller/base.rb:194:in
        `process_action''"},{"id":11,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/rendering.rb:30:in
        `process_action''"},{"id":12,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/abstract_controller/callbacks.rb:42:in
        `block in process_action''"},{"id":13,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:109:in
        `block in run_callbacks''"},{"id":14,"trace":"vendor/bundle/ruby/2.4.0/gems/audited-4.9.0/lib/audited/sweeper.rb:14:in
        `around''"},{"id":15,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:118:in
        `block in run_callbacks''"},{"id":16,"trace":"vendor/bundle/ruby/2.4.0/gems/audited-4.9.0/lib/audited/sweeper.rb:14:in
        `around''"},{"id":17,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:118:in
        `block in run_callbacks''"},{"id":18,"trace":"vendor/bundle/ruby/2.4.0/gems/sentry-raven-2.12.2/lib/raven/integrations/rails/controller_transaction.rb:7:in
        `block in included''"},{"id":19,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:118:in
        `instance_exec''"},{"id":20,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:118:in
        `block in run_callbacks''"},{"id":21,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:136:in
        `run_callbacks''"},{"id":22,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/abstract_controller/callbacks.rb:41:in
        `process_action''"},{"id":23,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/rescue.rb:22:in
        `process_action''"},{"id":24,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/instrumentation.rb:34:in
        `block in process_action''"},{"id":25,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/notifications.rb:168:in
        `block in instrument''"},{"id":26,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/notifications/instrumenter.rb:23:in
        `instrument''"},{"id":27,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/notifications.rb:168:in
        `instrument''"},{"id":28,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/instrumentation.rb:32:in
        `process_action''"},{"id":29,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal/params_wrapper.rb:256:in
        `process_action''"},{"id":30,"trace":"vendor/bundle/ruby/2.4.0/gems/activerecord-5.2.3/lib/active_record/railties/controller_runtime.rb:24:in
        `process_action''"},{"id":31,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/abstract_controller/base.rb:134:in
        `process''"},{"id":32,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal.rb:191:in
        `dispatch''"},{"id":33,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_controller/metal.rb:252:in
        `dispatch''"},{"id":34,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/route_set.rb:52:in
        `dispatch''"},{"id":35,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/route_set.rb:34:in
        `serve''"},{"id":36,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/mapper.rb:18:in
        `block in <class:Constraints>''"},{"id":37,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/mapper.rb:48:in
        `serve''"},{"id":38,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/journey/router.rb:52:in
        `block in serve''"},{"id":39,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/journey/router.rb:35:in
        `each''"},{"id":40,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/journey/router.rb:35:in
        `serve''"},{"id":41,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/routing/route_set.rb:840:in
        `call''"},{"id":42,"trace":"vendor/bundle/ruby/2.4.0/gems/turnout-2.5.0/lib/rack/turnout.rb:25:in
        `call''"},{"id":43,"trace":"vendor/bundle/ruby/2.4.0/gems/flipper-0.16.2/lib/flipper/middleware/memoizer.rb:62:in
        `memoized_call''"},{"id":44,"trace":"vendor/bundle/ruby/2.4.0/gems/flipper-0.16.2/lib/flipper/middleware/memoizer.rb:40:in
        `call''"},{"id":45,"trace":"vendor/bundle/ruby/2.4.0/gems/batch-loader-1.4.1/lib/batch_loader/middleware.rb:11:in
        `call''"},{"id":46,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/deflater.rb:34:in
        `call''"},{"id":47,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/etag.rb:25:in
        `call''"},{"id":48,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/conditional_get.rb:25:in
        `call''"},{"id":49,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/head.rb:12:in
        `call''"},{"id":50,"trace":"vendor/bundle/ruby/2.4.0/gems/activerecord-5.2.3/lib/active_record/migration.rb:559:in
        `call''"},{"id":51,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in
        `block in call''"},{"id":52,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/callbacks.rb:98:in
        `run_callbacks''"},{"id":53,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/callbacks.rb:26:in
        `call''"},{"id":54,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/executor.rb:14:in
        `call''"},{"id":55,"trace":"vendor/bundle/ruby/2.4.0/gems/better_errors-2.5.1/lib/better_errors/middleware.rb:59:in
        `call''"},{"id":56,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/debug_exceptions.rb:61:in
        `call''"},{"id":57,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/show_exceptions.rb:33:in
        `call''"},{"id":58,"trace":"vendor/bundle/ruby/2.4.0/gems/lograge-0.10.0/lib/lograge/rails_ext/rack/logger.rb:15:in
        `call_app''"},{"id":59,"trace":"vendor/bundle/ruby/2.4.0/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in
        `block in call''"},{"id":60,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/tagged_logging.rb:71:in
        `block in tagged''"},{"id":61,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/tagged_logging.rb:28:in
        `tagged''"},{"id":62,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/tagged_logging.rb:71:in
        `tagged''"},{"id":63,"trace":"vendor/bundle/ruby/2.4.0/gems/railties-5.2.3/lib/rails/rack/logger.rb:26:in
        `call''"},{"id":64,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/remote_ip.rb:81:in
        `call''"},{"id":65,"trace":"vendor/bundle/ruby/2.4.0/gems/request_store-1.4.1/lib/request_store/middleware.rb:19:in
        `call''"},{"id":66,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/request_id.rb:27:in
        `call''"},{"id":67,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/runtime.rb:22:in
        `call''"},{"id":68,"trace":"vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.3/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in
        `call''"},{"id":69,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/executor.rb:14:in
        `call''"},{"id":70,"trace":"vendor/bundle/ruby/2.4.0/gems/actionpack-5.2.3/lib/action_dispatch/middleware/static.rb:127:in
        `call''"},{"id":71,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in
        `call''"},{"id":72,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-utf8_sanitizer-1.6.0/lib/rack/utf8_sanitizer.rb:22:in
        `call''"},{"id":73,"trace":"vendor/bundle/ruby/2.4.0/gems/sentry-raven-2.12.2/lib/raven/integrations/rack.rb:51:in
        `call''"},{"id":74,"trace":"vendor/bundle/ruby/2.4.0/gems/rack-cors-1.0.3/lib/rack/cors.rb:95:in
        `call''"},{"id":75,"trace":"vendor/bundle/ruby/2.4.0/gems/railties-5.2.3/lib/rails/engine.rb:524:in
        `call''"},{"id":76,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/rack/thread_handler_extension.rb:97:in
        `process_request''"},{"id":77,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler/thread_handler.rb:149:in
        `accept_and_process_next_request''"},{"id":78,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler/thread_handler.rb:110:in
        `main_loop''"},{"id":79,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler.rb:415:in
        `block (3 levels) in start_threads''"},{"id":80,"trace":"/usr/lib/ruby/vendor_ruby/phusion_passenger/utils.rb:113:in
        `block in create_thread_and_abort_on_exception''"}]}}'
    http_version: 
  recorded_at: Mon, 18 Nov 2019 10:17:26 GMT
- request:
    method: get
    uri: https://api.test.datacite.org/dois/10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Mozilla/5.0 (compatible; Maremma/4.4; +https://github.com/datacite/maremma)
      Accept:
      - application/vnd.schemaorg.ld+json
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 18 Nov 2019 10:17:26 GMT
      Content-Type:
      - application/vnd.schemaorg.ld+json; charset=utf-8
      Connection:
      - keep-alive
      Status:
      - 200 OK
      X-Anonymous-Consumer:
      - 'true'
      Cache-Control:
      - max-age=0, private, must-revalidate
      Vary:
      - Accept-Encoding, Origin
      X-Request-Id:
      - 42a4ffb0-f5e4-4b84-865c-cd60a97a119d
      Etag:
      - W/"5f8015bff101dabbec61d70f8188a732"
      X-Runtime:
      - '0.011882'
      X-Powered-By:
      - Phusion Passenger 6.0.4
      Server:
      - nginx/1.17.3 + Phusion Passenger 6.0.4
    body:
      encoding: ASCII-8BIT
      string: |-
        {
          "@context": "http://schema.org",
          "@type": "Dataset",
          "@id": "https://doi.org/10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff",
          "identifier": [
            {
              "@type": "PropertyValue",
              "propertyID": "DOI",
              "value": "https://handle.test.datacite.org/10.0311/fk2/e11643a99d903d0ccfc2d523b344d9ff"
            },
            {
              "@type": "PropertyValue",
              "propertyID": "URL",
              "value": "https://pasta-s.lternet.edu/package/eml/knb-lter-jrn/100/4"
            }
          ],
          "url": "https://portal-s.lternet.edu/nis/mapbrowse?packageid=knb-lter-jrn.100.4",
          "additionalType": "dataPackage",
          "name": "High resolution shrub cover raster maps of the Jornada Basin LTER, including JER and CDRRC (2011)",
          "author": [
            {
              "name": "Wenjie Ji",
              "givenName": "Wenjie",
              "familyName": "Ji",
              "@type": "Person"
            },
            {
              "name": "Niall P. Hanan",
              "givenName": "Niall P.",
              "familyName": "Hanan",
              "@type": "Person"
            }
          ],
          "description": "This data package contains two raster shrub cover maps of the Jornada Experimental Range and Chihuahuan Desert Rangeland Research Center (CDRRC) created using 1m resolution National Agriculture Imagery Program (NAIP) aerial photo acquired in 2011. A one-meter resolution raster file lists cover as non-shrub, shrub, or no data available. A hectare resolution raster file contains fractional shrub cover values (0-1) calculed from the 1 meter raster. NOTE: There is currently a hole in the coverage of the hectare raster (no-data values) in the \"scarplet\" region in the southeastern portion of the Jornada Basin. The creators of the dataset plan to fill this missing area of coverage in a future update to the data package once suitable imagery of the area is acquired.",
          "inLanguage": "eng",
          "datePublished": "2019",
          "publisher": {
            "@type": "Organization",
            "name": "Environmental Data Initiative"
          },
          "provider": {
            "@type": "Organization",
            "name": "DataCite"
          }
        }
    http_version: 
  recorded_at: Mon, 18 Nov 2019 10:17:26 GMT
recorded_with: VCR 2.9.3
